

# ğŸŒ© Helm Storm â€“ Secure Full-Stack Authentication System

## 1. Project Overview

**Helm Storm** is a full-stack authentication system that provides secure **Sign-up** and **Sign-in** functionality.
The project is built using a **DevSecOps** and **Cloud-Native** approach, combining application development, automated security checks, and Kubernetes deployment.

The goal of this project is to demonstrate how a modern authentication system can be designed, deployed, scaled, and secured using industry-standard tools.



## 2. Key Features

* ğŸ” Secure Sign-up / Sign-in flow
* âš¡ Redis caching for fast authentication
* ğŸ—„ PostgreSQL with connection pooling
* ğŸ“¦ Dockerized backend and frontend
* â˜¸ Kubernetes deployment using Helm
* ğŸ“ˆ Horizontal Pod Autoscaling (CPU & Memory)
* ğŸ” SonarQube code quality & security scanning
* ğŸ” Container image verification using Cosign



## 3. Technology Stack

| Layer         | Technology                |
| ------------- | ------------------------- |
| Backend       | Python (Flask)            |
| Frontend      | HTML / JavaScript (Nginx) |
| Database      | PostgreSQL                |
| Cache         | Redis                     |
| CI/CD         | GitLab CI                 |
| Security      | SonarQube, Cosign         |
| Orchestration | Kubernetes + Helm         |
| Scaling       | HPA (CPU & Memory)        |



## 4. Project Architecture

<img src="project architecture.jpg" alt="Description" width="1000">

## 5. Directory Structure & File Description
helm-storm/
â”œâ”€â”€ app/                        # Application Source Code
â”‚   â”œâ”€â”€ backend/                # Flask API Logic
â”‚   â”‚   â”œâ”€â”€ app.py              # Main authentication logic
â”‚   â”‚   â”œâ”€â”€ requirements.txt    # Python dependencies
â”‚   â”‚   â””â”€â”€ Dockerfile          # Backend image build instructions
â”‚   â””â”€â”€ frontend/               # User Interface
â”‚       â”œâ”€â”€ index.html          # HTML5 UI
â”‚       â””â”€â”€ Dockerfile          # Nginx frontend image build
â”œâ”€â”€ helm/                       # Infrastructure as Code (Helm Charts)
â”‚   â”œâ”€â”€ helm-backend/           # Chart for the API tier
â”‚   â”‚   â”œâ”€â”€ Chart.yaml          # Metadata (v0.1.0)
â”‚   â”‚   â”œâ”€â”€ values.yaml         # Config: Replicas, Image tags
â”‚   â”‚   â””â”€â”€ templates/          # K8s Manifests (Deployment, Service)
â”‚   â”œâ”€â”€ helm-db/                # Chart for PostgreSQL
â”‚   â”‚   â”œâ”€â”€ Chart.yaml
â”‚   â”‚   â”œâ”€â”€ values.yaml         # Config: Storage size, User/Pass
â”‚   â”‚   â””â”€â”€ templates/          # StatefulSet, PVC, Secret
â”‚   â”œâ”€â”€ helm-frontend/          # Chart for the UI tier
â”‚   â”‚   â”œâ”€â”€ Chart.yaml
â”‚   â”‚   â”œâ”€â”€ values.yaml         # Config: ServiceType, HPA limits
â”‚   â”‚   â””â”€â”€ templates/          # Deployment, Service, HPA
â”‚   â””â”€â”€ helm-redis/             # Chart for Caching tier
â”‚       â”œâ”€â”€ Chart.yaml
â”‚       â”œâ”€â”€ values.yaml         # Config: Maxmemory, Persistence
â”‚       â””â”€â”€ templates/          # StatefulSet, NetworkPolicy
â”œâ”€â”€ cosign.pub                  # Public key for image signature verification
â”œâ”€â”€ install.yaml                # Kyverno Security Engine installation
â”œâ”€â”€ test_suite.py               # Automated Gatekeeper (Python Audit Script)
â”œâ”€â”€ docker-compose-sonar.yml    # Local SonarQube & Postgres for auditing
â””â”€â”€ README.md                   # Project Documentation





### Root Directory

| Path                       | Description                           |
| -------------------------- | ------------------------------------- |
| `/app`                     | Application source code               |
| `/helm`                    | Helm charts for Kubernetes deployment |
| `.gitlab-ci.yml`           | CI/CD pipeline configuration          |
| `docker-compose-sonar.yml` | Local SonarQube setup                 |
| `test_suite.py`            | Automated quality & security tests    |
| `security-policy.yaml`     | Kubernetes Pod Security rules         |
| `cosign.pub`               | Public key for image verification     |



### Application Layer (`/app`)

#### Backend (`/app/backend`)

| File               | Function                          |
| ------------------ | --------------------------------- |
| `app.py`           | Flask API handling authentication |
| `Dockerfile`       | Backend container image           |
| `requirements.txt` | Python dependencies               |

**Backend Responsibilities**

* Validate input data
* Check Redis cache first
* Query PostgreSQL securely
* Register new users
* Manage database connections using pooling



#### Frontend (`/app/frontend`)

| File         | Function                         |
| ------------ | -------------------------------- |
| `index.html` | Sign-up / Sign-in user interface |
| `Dockerfile` | Nginx container for frontend     |



### Infrastructure Layer (`/helm`)

| File                  | Function                          |
| --------------------- | --------------------------------- |
| `values.yaml`         | Global deployment configuration   |
| `deployment.yaml`     | Backend deployment definition     |
| `hpa.yaml`            | Horizontal Pod Autoscaler         |
| `namespace.yaml`      | Dedicated Kubernetes namespace    |
| `resource-quota.yaml` | Resource limits for the namespace |



## 6. Backend Logic Overview

The backend exposes a single authentication endpoint:

### `POST /check-user`

**Flow**

1. Receive username and phone number
2. Check Redis cache
3. If cache miss â†’ query PostgreSQL
4. If user exists â†’ return success
5. If user does not exist â†’ create user

**Security Measures**

* Parameterized SQL queries (prevents SQL Injection)
* Input validation
* Connection pooling
* Centralized logging



## 7. Helm Configuration Overview

### Scaling

* Minimum replicas: **2**
* Maximum replicas: **10**
* CPU threshold: **60%**
* Memory threshold: **80%**

### Resource Limits (per pod)

* Requests: `100m CPU / 128Mi RAM`
* Limits: `200m CPU / 256Mi RAM`



## 8. Getting Started (How to Run the Project)

### Prerequisites

* Docker & Docker Compose
* Kubernetes Cluster (Minikube / EKS / AKS)
* Helm CLI
* Python 3.9+
* Metrics Server (for HPA)



### Step 1: Clone the Repository

```bash
git clone https://github.com/nabilaebrahim/project1.git
cd project1
```



### Step 2: Run Quality & Security Checks

```bash
docker-compose -f docker-compose-sonar.yml up -d
python test_suite.py
```



### Step 3: Deploy Using Helm

```bash
helm install helm-storm ./helm/helm-backend
```



### Step 4: Verify Deployment

```bash
kubectl get pods -n backend-ns
kubectl get hpa -n backend-ns
```



## 9. Development Guide

### Adding New Features

1. Create a new branch

```bash
git checkout -b feature/new-feature
```

2. Update backend logic in `app.py`
3. Update `requirements.txt` if needed
4. Run `test_suite.py`
5. Push changes and ensure CI pipeline passes



### Modifying Infrastructure

* Scaling â†’ edit `values.yaml`
* Database schema â†’ update `deployment.yaml` init container
* Security rules â†’ update `security-policy.yaml`



## 10. CI/CD & Security

* Every push triggers GitLab CI
* SonarQube scans for bugs and vulnerabilities
* Pipeline fails if Quality Gate is not **GREEN**
* Images are verified using **Cosign** before deployment



## 11. Team

**Project Team:** Helm Storm ğŸŒ©
Built with a focus on **security, scalability, and maintainability**.




